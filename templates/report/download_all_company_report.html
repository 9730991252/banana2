{% extends 'home/base.html' %}
{% block head %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.min.js" integrity="sha512-pdCVFUWsxl1A4g0uV6fyJ3nrnTGeWnZN2Tl/56j45UvZ1OMdm9CIbctuIHj+yBIRTUUyv6I9+OivXj4i0LPEYA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

{% endblock head %}
{% block content %}
{% load office_tag %}
{% include 'include/alert.html' %}



<div class="container">
    <div id="canvas">
        <br>
        {% for b in bill %}
        <div class="card">
            <div class="card-body" style="display: grid; grid-template-columns: 2fr 1fr 3fr; gap: 20px;">
                <b class="text-danger">Rs. {{ b.total_amount }}</b>
                <p>Date: {{ b.date }}</p>
                <p>Company: {{ b.company.name }}</p>
            </div>

            <div class="card-body" style="display: flex; justify-content: center; gap: 40px;">
                <b class="text-danger">Pendding Rs. {% bill_company_pending_amount b.id %}</b>
                <b class="text-success">Paid Rs. {% bill_company_paid_amount b.id %}</b>
            </div>

            <div class="card-body" style="display: flex; justify-content: center; gap: 40px;">
                <b>Cash Rs.{% bill_company_paid_amount_cash b.id %}</b>
                <b class="text-primary">Phonepe Rs.{% bill_company_paid_amount_phonepe b.id %}</b>
                <b class="text-primary">Bank Rs.{% bill_company_paid_amount_bank b.id %}</b>
                
            </div>
        </div>
            <br>
        {% endfor %}
    </div>
</div>
<script>
    var pdf = document.getElementById("canvas");
    var opt = {
        margin: 0.5,
        filename: '{{bill.farmer.name}} '+ new Date().toLocaleString() +' .pdf',
        image: { type: 'jpeg', quality: 50 },
        html2canvas: { scale: 2 },
        jsPDF: { unit: 'in', format: 'a4', orientaion: 'portrait' }
    };
    html2pdf().set(opt).from(pdf).save().then(pdfResult => {})
</script>


{% endblock content %}